"use strict";(self.webpackChunksynaptask_docs=self.webpackChunksynaptask_docs||[]).push([[733],{6824:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"api/ws/link_add","title":"link:add","description":"Create a link between two nodes via WebSocket.","source":"@site/docs/api/ws/link_add.md","sourceDirName":"api/ws","slug":"/api/ws/link_add","permalink":"/api/ws/link_add","draft":false,"unlisted":false,"editUrl":"https://github.com/arsenlblack/synaptask/edit/main/docs/api/ws/link_add.md","tags":[],"version":"current","lastUpdatedBy":"admin","lastUpdatedAt":1758388283000,"frontMatter":{"title":"link:add","slug":"/api/ws/link_add"},"sidebar":"tutorialSidebar","previous":{"title":"node:add","permalink":"/api/ws/node_add"},"next":{"title":"GET /api/graph","permalink":"/api/rest/get_graph"}}');var r=i(4848),d=i(8453);const l={title:"link:add",slug:"/api/ws/link_add"},t=void 0,a={},c=[{value:"Behavior",id:"behavior",level:2},{value:"Client \u2192 Server <code>link:add</code>",id:"client--server-linkadd",level:3},{value:"Server \u2192 Client <code>link:added</code>",id:"server--client-linkadded",level:3},{value:"Success",id:"success",level:4},{value:"Error <code>link:add:error</code>",id:"error-linkadderror",level:4},{value:"Rate Limits",id:"rate-limits",level:2},{value:"Example (JavaScript)",id:"example-javascript",level:2},{value:"Example (Python)",id:"example-python",level:2}];function o(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Create a link between two nodes via WebSocket."}),"\n",(0,r.jsx)(n.h2,{id:"behavior",children:"Behavior"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"A link represents a dependency between nodes."}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"0"})," \u2192 primary link (blocking): source blocks target."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"1"})," \u2192 secondary link (non-blocking)."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["ACL:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["For ",(0,r.jsx)(n.strong,{children:"secondary links"}),", caller must have at least ",(0,r.jsx)(n.strong,{children:"editor"})," access to source and ",(0,r.jsx)(n.strong,{children:"viewer"})," access to target."]}),"\n",(0,r.jsxs)(n.li,{children:["For ",(0,r.jsx)(n.strong,{children:"primary links"}),", caller must must have at least ",(0,r.jsx)(n.strong,{children:"editor"})," access on both."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"History batch records link creation and all side effects (e.g., cascading blocking of ancestors)."}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"client--server-linkadd",children:["Client \u2192 Server ",(0,r.jsx)(n.code,{children:"link:add"})]}),"\n",(0,r.jsx)(n.p,{children:"Request to create a link between nodes."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "source": "uuid",\n  "target": "uuid",\n  "type": 0\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"source"})," \u2014 ID of the source node (string, required)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"target"})," \u2014 ID of the target node (string, required)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," \u2014 integer: ",(0,r.jsx)(n.code,{children:"0 = primary"})," (blocking), ",(0,r.jsx)(n.code,{children:"1 = secondary"})," (optional)"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"server--client-linkadded",children:["Server \u2192 Client ",(0,r.jsx)(n.code,{children:"link:added"})]}),"\n",(0,r.jsx)(n.h4,{id:"success",children:"Success"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "ok": true,\n  "diff": {\n    "links": [\n      {\n        "id": "uuid",\n        "source": "nodeId",\n        "target": "nodeId",\n        "type": 0,\n        "wasBlocker": true,\n        "version": 0\n      }\n    ],\n    "nodes": [\n      {\n        "id": "uuid",\n        "status": 2,\n        "version": 5\n      }\n    ]\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"links"})," \u2014 the created or updated link(s)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"nodes"})," \u2014 any nodes affected by cascade blocking (if primary link)."]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"error-linkadderror",children:["Error ",(0,r.jsx)(n.code,{children:"link:add:error"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "ok": false,\n  "error": "forbidden" | "internal" | "not_found"\n       | "bad_request" | "conflict" | "rate_limited"\n  "message": "<optional human-readable>"\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"rate-limits",children:"Rate Limits"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"5 / 10s"})," per user."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"example-javascript",children:"Example (JavaScript)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// Create a primary link between nodes\nsocket.emit('link:add', { source: \"123\", target: \"456\", type: 0 });\n\nsocket.on('link:added', (data) => {\n  console.log('Link created:', data.links);\n});\n\nsocket.on('link:add:error', (err) => {\n  console.error('Link creation failed:', err);\n});\n"})}),"\n",(0,r.jsx)(n.h2,{id:"example-python",children:"Example (Python)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import socketio\n\nAPI_URL = "https://synaptask.space"\nAPI_TOKEN = "<YOUR_API_TOKEN>"\n\nsio = socketio.Client()\n\n@sio.event\ndef connect():\n    print("connected, sid:", sio.sid)\n    sio.emit("link:add", {"source": "123", "target": "456", "type": 0})\n\n@sio.on("link:added")\ndef on_link_added(data):\n    print("Link created:", data)\n    sio.disconnect()\n\n@sio.on("link:add:error")\ndef on_link_error(err):\n    print("link error:", err)\n    sio.disconnect()\n\nsio.connect(API_URL, auth={"api_token": API_TOKEN}, transports=["websocket"])\nsio.wait()\n'})}),"\n",(0,r.jsxs)(n.p,{children:["See also: ",(0,r.jsx)(n.a,{href:"../rest/add_link.md",children:"REST /api/link"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>t});var s=i(6540);const r={},d=s.createContext(r);function l(e){const n=s.useContext(d);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(d.Provider,{value:n},e.children)}}}]);