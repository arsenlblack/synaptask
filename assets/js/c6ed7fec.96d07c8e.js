"use strict";(self.webpackChunksynaptask_docs=self.webpackChunksynaptask_docs||[]).push([[772],{5387:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"api/ws/get_graph","title":"graph:get","description":"Retrieve a paginated slice of the authenticated user\u2019s graph over WebSocket.","source":"@site/docs/api/ws/get_graph.md","sourceDirName":"api/ws","slug":"/api/ws/get_graph","permalink":"/api/ws/get_graph","draft":false,"unlisted":false,"editUrl":"https://github.com/arsenlblack/synaptask/edit/main/docs/api/ws/get_graph.md","tags":[],"version":"current","lastUpdatedBy":"admin","lastUpdatedAt":1758847208000,"frontMatter":{"title":"graph:get","slug":"/api/ws/get_graph"},"sidebar":"tutorialSidebar","previous":{"title":"WebSocket Connect","permalink":"/api/ws/ws_connect"},"next":{"title":"node:add","permalink":"/api/ws/node_add"}}');var r=s(4848),l=s(8453);const t={title:"graph:get",slug:"/api/ws/get_graph"},c=void 0,d={},o=[{value:"Rate limits",id:"rate-limits",level:4},{value:"Client \u2192 Server <code>graph:get</code>",id:"client--server-graphget",level:3},{value:"Parameters:",id:"parameters",level:3},{value:"Success (ack)",id:"success-ack",level:4},{value:"Field reference",id:"field-reference",level:3},{value:"Node fields",id:"node-fields",level:4},{value:"Link fields",id:"link-fields",level:4},{value:"Error (ack)",id:"error-ack",level:4},{value:"Errors",id:"errors",level:2},{value:"Rate Limits",id:"rate-limits-1",level:2},{value:"Example (JavaScript)",id:"example-javascript",level:2},{value:"Example (Python)",id:"example-python",level:2}];function a(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Retrieve a paginated slice of the authenticated user\u2019s graph over WebSocket."}),"\n",(0,r.jsx)(n.h4,{id:"rate-limits",children:"Rate limits"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Maximum ",(0,r.jsx)(n.strong,{children:"5 requests per 10 seconds per user"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"If the limit is exceeded, the server still responds with an ack in the standard error shape:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "ok": false,\n  "error": "rate_limited",\n  "message": "Too many requests, please slow down",\n  "trace_id": "f3a12bc9e1d4"\n}\n'})}),"\n",(0,r.jsxs)(n.h3,{id:"client--server-graphget",children:["Client \u2192 Server ",(0,r.jsx)(n.code,{children:"graph:get"})]}),"\n",(0,r.jsx)(n.p,{children:"Request part of the user\u2019s graph over WebSocket."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "limit": 1000,\n  "offset": 0\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"parameters",children:"Parameters:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"limit"})," ",(0,r.jsx)(n.em,{children:"(integer, optional)"})," \u2014 maximum number of objects in the response.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["default = ",(0,r.jsx)(n.code,{children:"1000"})]}),"\n",(0,r.jsxs)(n.li,{children:["min = ",(0,r.jsx)(n.code,{children:"1"})]}),"\n",(0,r.jsxs)(n.li,{children:["max = ",(0,r.jsx)(n.code,{children:"5000"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"offset"})," ",(0,r.jsx)(n.em,{children:"(integer, optional)"})," \u2014 offset for pagination.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["default = ",(0,r.jsx)(n.code,{children:"0"})]}),"\n",(0,r.jsxs)(n.li,{children:["min = ",(0,r.jsx)(n.code,{children:"0"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"success-ack",children:"Success (ack)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "ok": true,\n  "hasMore": true,\n  "trace_id": "f3a12bc9e1d4",\n  "graph": {\n    "nodes": [\n      {\n        "id": "<uuid>",\n        "title": "string",\n        "description": "string",\n        "status": 0,\n        "dueDate": "2025-09-13T10:00:00Z", // ISO-8601 strings with Z suffix\n        "type": 0,\n        "tags": ["backend", "urgent"],\n        "priority": 5,\n        "dependant": true,\n        "volume": 5,\n        "version": 0,\n        "assignee": ["user1", "user2"],\n        "createdTime": "2025-09-13T10:00:00Z", // ISO-8601 strings with Z suffix\n        "lastEditedTime": "2025-09-13T10:00:00Z", // ISO-8601 strings with Z suffix\n        "ownerUsername": "BLACK",\n        "ownerEmail": "example@synaptask.space",\n        "publicToken": "string",\n        "x": 0.0,\n        "y": 0.0,\n        "z": 0.0,\n        "pinned": false,\n        "collapsed": false,\n        "access": 0,\n        "shareRoots": ["uuid1", "uuid2"]\n      }\n    ],\n    "links": [\n      {\n        "id": "<uuid>",\n        "source": "<uuid>",\n        "target": "<uuid>",\n        "type": 0,\n        "version": 0,\n        "wasBlocker": false\n      }\n    ]\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"field-reference",children:"Field reference"}),"\n",(0,r.jsx)(n.h4,{id:"node-fields",children:"Node fields"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," ",(0,r.jsx)(n.em,{children:"(int)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"0"})," = Available"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"1"})," = InProgress"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"2"})," = Blocked"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"3"})," = Completed"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," ",(0,r.jsx)(n.em,{children:"(int)"})," reserved, subject to change."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"access"})," ",(0,r.jsx)(n.em,{children:"(int)"})," access level for caller","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"0"})," = owner (full rights)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"1"})," = admin"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"2"})," = editor"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"3"})," = viewer"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"shareRoots"})," ",(0,r.jsx)(n.em,{children:"(array of uuid)"})," \u2014 list of branch root IDs this node belongs to (used for access control and broadcasts)."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"link-fields",children:"Link fields"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," ",(0,r.jsx)(n.em,{children:"(int)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"0"})," = primary (blocking dependency)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"1"})," = secondary (non-blocking dependency)"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"wasBlocker"})," ",(0,r.jsx)(n.em,{children:"(bool)"})," \u2014 indicates whether the link previously represented a blocking dependency."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"error-ack",children:"Error (ack)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "ok": false,\n  "error": "bad_request.out_of_range",\n  "message": "limit/offset out of range",\n  "trace_id": "f3a12bc9e1d4"\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"errors",children:"Errors"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Possible error codes returned by the server:"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"bad_request.invalid_number"})," \u2014 ",(0,r.jsx)(n.code,{children:"limit"})," or ",(0,r.jsx)(n.code,{children:"offset"})," is not an integer."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"bad_request.out_of_range"})," \u2014 ",(0,r.jsx)(n.code,{children:"limit"})," or ",(0,r.jsx)(n.code,{children:"offset"})," is outside allowed bounds."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"forbidden.auth_missing"})," \u2014 user not authenticated."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"internal.malformed_response"})," \u2014 unexpected internal error."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"internal"})," \u2014 generic unexpected failure (server returned ",(0,r.jsx)(n.code,{children:'{error: "internal.exception"}'})," etc.).\nAll error responses always include a ",(0,r.jsx)(n.code,{children:"trace_id"})," for log correlation."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"rate-limits-1",children:"Rate Limits"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"Maximum 5 requests per 10 seconds per user."})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"example-javascript",children:"Example (JavaScript)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'// Request first page of graph (1000 items by default)\nlet allNodes = [];\nlet allLinks = [];\nlet limit = 1000;\nlet offset = 0;\n\nconst socket = io("https://synaptask.space", {\n  transports: ["websocket"],\n  extraHeaders: {\n    Authorization: "Bearer <YOUR_API_TOKEN>",\n  },\n});\n\nfunction requestGraph() {\n  socket.emit("graph:get", { limit, offset }, (ack) => {\n    if (!ack.ok) {\n      console.error("graph:get failed:", ack);\n      return;\n    }\n\n    const graph = ack.graph || {};\n    const nodes = graph.nodes || [];\n    const links = graph.links || [];\n\n    allNodes.push(...nodes);\n    allLinks.push(...links);\n\n    console.log(\n      `chunk: +${nodes.length} nodes, +${links.length} links (offset=${offset}) trace_id=${ack.trace_id}`\n    );\n\n    if (ack.hasMore) {\n      offset += limit;\n      requestGraph();\n    } else {\n      console.log("Graph fully loaded");\n      console.log("Total nodes:", allNodes.length);\n      console.log("Total links:", allLinks.length);\n    }\n  });\n}\n\nsocket.on("connect", () => {\n  console.log("connected:", socket.id);\n  requestGraph();\n});\n\nsocket.on("disconnect", () => {\n  console.log("disconnected");\n});\n'})}),"\n",(0,r.jsx)(n.h2,{id:"example-python",children:"Example (Python)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import socketio\n\nSERVER_URL = "https://synaptask.space"\nAPI_TOKEN = "<YOUR_API_TOKEN>"\n\nsio = socketio.Client(logger=False, engineio_logger=False)\n\nall_nodes, all_links = [], []\nlimit, offset = 1000, 0\n\n\n@sio.event\ndef connect():\n    print("connected, sid:", sio.sid)\n    request_graph()\n\n\ndef request_graph():\n    global offset\n    def on_ack(ack):\n        global offset\n        if not ack.get("ok"):\n            print("graph:get error:", ack)\n            sio.disconnect()\n            return\n\n        graph = ack.get("graph", {})\n        nodes = graph.get("nodes", [])\n        links = graph.get("links", [])\n\n        all_nodes.extend(nodes)\n        all_links.extend(links)\n        print(f"chunk: +{len(nodes)} nodes, +{len(links)} links (offset={offset})")\n\n        if ack.get("hasMore"):\n            offset += limit\n            sio.emit("graph:get", {"limit": limit, "offset": offset}, callback=on_ack)\n        else:\n            print("done:", len(all_nodes), "nodes,", len(all_links), "links")\n            sio.disconnect()\n\n    sio.emit("graph:get", {"limit": limit, "offset": offset}, callback=on_ack)\n\n\n@sio.event\ndef connect_error(e):\n    print("connect_error:", e)\n\n\n@sio.event\ndef disconnect():\n    print("disconnected")\n\n\n# important: provide token in headers\nsio.connect(\n    SERVER_URL,\n    headers={"Authorization": f"Bearer {API_TOKEN}"},\n    transports=["websocket"],\n    wait_timeout=10,\n)\nsio.wait()\n'})}),"\n",(0,r.jsxs)(n.p,{children:["See also: ",(0,r.jsx)(n.a,{href:"/api/rest/get_graph",children:"REST /api/graph"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>c});var i=s(6540);const r={},l=i.createContext(r);function t(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);