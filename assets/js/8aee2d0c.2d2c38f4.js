"use strict";(self.webpackChunksynaptask_docs=self.webpackChunksynaptask_docs||[]).push([[441],{4168:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"api/rest/post_link","title":"POST /api/link","description":"Create a new link between two nodes.","source":"@site/docs/api/rest/post_link.md","sourceDirName":"api/rest","slug":"/api/rest/post_link","permalink":"/api/rest/post_link","draft":false,"unlisted":false,"editUrl":"https://github.com/arsenlblack/synaptask/edit/main/docs/api/rest/post_link.md","tags":[],"version":"current","lastUpdatedBy":"admin","lastUpdatedAt":1758847208000,"frontMatter":{"title":"POST /api/link","slug":"/api/rest/post_link"},"sidebar":"tutorialSidebar","previous":{"title":"POST /api/node","permalink":"/api/rest/post_node"}}');var i=s(4848),t=s(8453);const a={title:"POST /api/link",slug:"/api/rest/post_link"},o=void 0,c={},l=[{value:"Behavior",id:"behavior",level:2},{value:"REST API",id:"rest-api",level:2},{value:"Example (JavaScript)",id:"example-javascript",level:2},{value:"Example (Python)",id:"example-python",level:2}];function d(e){const n={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Create a new link between two nodes."}),"\n",(0,i.jsx)(n.h2,{id:"behavior",children:"Behavior"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"A link represents a dependency between nodes."}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"type"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"0"})," \u2192 primary link (blocking): source blocks target."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"1"})," \u2192 secondary link (non-blocking)."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["ACL:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["For ",(0,i.jsx)(n.strong,{children:"secondary links"}),", caller must have at least ",(0,i.jsx)(n.strong,{children:"editor"})," access to source and ",(0,i.jsx)(n.strong,{children:"viewer"})," access to target."]}),"\n",(0,i.jsxs)(n.li,{children:["For ",(0,i.jsx)(n.strong,{children:"primary links"}),", caller must have at least ",(0,i.jsx)(n.strong,{children:"editor"})," access on both."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"History batch records link creation and all side effects (e.g., cascading blocking of ancestors)."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"rest-api",children:"REST API"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Endpoint:"})," ",(0,i.jsx)(n.code,{children:"POST /api/link"}),"\n",(0,i.jsx)(n.strong,{children:"Auth:"})," API token\n",(0,i.jsx)(n.strong,{children:"Rate limit:"})," ",(0,i.jsx)(n.code,{children:"30/minute"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request body:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "source": "<uuid>",   // source node id\n  "target": "<uuid>",   // target node id\n  "type": 0              // 0 = primary, 1 = secondary\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"200 OK"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "ok": true,\n  "diff": {\n    "links": [\n      {\n        "id": "uuid",\n        "source": "nodeId",\n        "target": "nodeId",\n        "type": 0,\n        "wasBlocker": true,\n        "version": 0\n      }\n    ],\n    "nodes": [\n      { // if blocking cascaded\n        "id": "uuid",\n        "status": 2,\n        "version": 5,\n        "shareRoots": ["root-uuid-1", "root-uuid-2"]\n      }\n    ]\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"links"})," \u2014 the created or updated link(s)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"nodes"})," \u2014 any nodes affected by cascade blocking (if primary link)."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Errors:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"bad_request"})," (400),"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"unauthorized"})," (401),"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"forbidden"})," (403),"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"not_found"})," (404),"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"conflict"})," (409),"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"rate_limited"})," (429),"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"internal.exception"})," (500)."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"example-javascript",children:"Example (JavaScript)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"async function createLink(apiBaseUrl, apiToken, sourceId, targetId, type = 0) {\n  const resp = await fetch(`${apiBaseUrl}/link`, {\n    method: 'POST',\n    headers: {\n      'Authorization': `Bearer ${apiToken}`,\n      'Content-Type': 'application/json',\n      'Accept': 'application/json'\n    },\n    body: JSON.stringify({ source: sourceId, target: targetId, type })\n  });\n\n  if (!resp.ok) {\n    const err = await resp.json().catch(() => ({}));\n    throw new Error(`Link create failed: ${resp.status} ${err.error || ''}`);\n  }\n\n  return resp.json();\n}\n\n// usage\ncreateLink('https://synaptask.space/api', '<YOUR_API_TOKEN>', 'src-uuid', 'tgt-uuid', 0)\n  .then(data => console.log('Created link diff:', data.diff))\n  .catch(console.error);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"example-python",children:"Example (Python)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import requests\n\nAPI_BASE = "https://synaptask.space/api"\nAPI_TOKEN = "<YOUR_API_TOKEN>"\n\nresp = requests.post(\n    f"{API_BASE}/link",\n    headers={\n        "Authorization": f"Bearer {API_TOKEN}",\n        "Content-Type": "application/json"\n    },\n    json={"source": "src-uuid", "target": "tgt-uuid", "type": 0}\n)\n\nif resp.status_code != 200:\n    try:\n        err = resp.json()\n    except Exception:\n        err = {}\n    raise RuntimeError(f"Link create failed: {resp.status_code} {err}")\n\ndata = resp.json()\nprint("Created link diff:", data["diff"])\n'})})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>o});var r=s(6540);const i={},t=r.createContext(i);function a(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);