"use strict";(self.webpackChunksynaptask_docs=self.webpackChunksynaptask_docs||[]).push([[864],{7969:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"api/authentication","title":"Authentication","description":"All API and WebSocket interactions require authentication.","source":"@site/docs/api/authentication.md","sourceDirName":"api","slug":"/api/authentication","permalink":"/api/authentication","draft":false,"unlisted":false,"editUrl":"https://github.com/arsenlblack/synaptask/edit/main/docs/api/authentication.md","tags":[],"version":"current","lastUpdatedBy":"admin","lastUpdatedAt":1757823755000,"frontMatter":{"title":"Authentication","slug":"/api/authentication"},"sidebar":"tutorialSidebar","previous":{"title":"Trash","permalink":"/concepts/trash"},"next":{"title":"WebSocket Coonnect","permalink":"/api/ws/ws_connect"}}');var i=s(4848),r=s(8453);const l={title:"Authentication",slug:"/api/authentication"},c=void 0,d={},o=[{value:"API Tokens",id:"api-tokens",level:2},{value:"Generating a Token",id:"generating-a-token",level:2},{value:"Using Tokens",id:"using-tokens",level:2},{value:"REST API",id:"rest-api",level:3},{value:"WebSockets",id:"websockets",level:3},{value:"Access Levels",id:"access-levels",level:2},{value:"Error Responses",id:"error-responses",level:2},{value:"Rate Limits",id:"rate-limits",level:2},{value:"Global defaults",id:"global-defaults",level:3},{value:"Notes",id:"notes",level:3},{value:"Security Notes",id:"security-notes",level:2},{value:"Checklist for Integrators",id:"checklist-for-integrators",level:2}];function a(e){const n={blockquote:"blockquote",br:"br",code:"code",h2:"h2",h3:"h3",hr:"hr",input:"input",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["All API and WebSocket interactions require authentication.",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Tokens"})," can be generated and managed by the user in their account settings."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"api-tokens",children:"API Tokens"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Long-lived credentials generated per user."}),"\n",(0,i.jsx)(n.li,{children:"Each token is tied to a user account and has the same access rights as that user."}),"\n",(0,i.jsxs)(n.li,{children:["Tokens can be ",(0,i.jsx)(n.strong,{children:"revoked"})," or ",(0,i.jsx)(n.strong,{children:"rotated"})," at any time from the user profile."]}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Keep tokens secret. Treat them like passwords."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"generating-a-token",children:"Generating a Token"}),"\n",(0,i.jsxs)(n.p,{children:["Users can generate API tokens from the ",(0,i.jsx)(n.strong,{children:"Account Settings \u2192 API Tokens"})," section.",(0,i.jsx)(n.br,{}),"\n","The plaintext value is displayed once at creation and cannot be retrieved later."]}),"\n",(0,i.jsx)(n.h2,{id:"using-tokens",children:"Using Tokens"}),"\n",(0,i.jsx)(n.h3,{id:"rest-api",children:"REST API"}),"\n",(0,i.jsxs)(n.p,{children:["Include the API token in the ",(0,i.jsx)(n.code,{children:"Authorization"})," header:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"Authorization: Bearer <api_token>\n"})}),"\n",(0,i.jsx)(n.p,{children:"Example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X GET https://synaptask.space/api/nodes \\\n  -H "Authorization: Bearer st_xxxxxxxxxxxxxxxxxxxx"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"websockets",children:"WebSockets"}),"\n",(0,i.jsxs)(n.p,{children:["When connecting with Socket.IO, provide the API token in the ",(0,i.jsx)(n.code,{children:"auth"})," payload:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"const socket = io(SERVER_URL, {\n  transports: ['websocket'],\n  auth: { api_token: '<api_token>' }\n});\n"})}),"\n",(0,i.jsx)(n.p,{children:"Or send as a header if your client supports it:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Sec-WebSocket-Protocol: Bearer, st_xxxxxxxxxxxxxxxxxxxx\n"})}),"\n",(0,i.jsx)(n.h2,{id:"access-levels",children:"Access Levels"}),"\n",(0,i.jsxs)(n.p,{children:["Access is enforced per node.",(0,i.jsx)(n.br,{}),"\n","Tokens inherit the access rights of the user who generated them."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Constant"}),(0,i.jsx)(n.th,{children:"Value"}),(0,i.jsx)(n.th,{children:"Capabilities"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ACCESS_OWNER"})}),(0,i.jsx)(n.td,{children:"0"}),(0,i.jsx)(n.td,{children:"Full control; cannot be revoked"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ACCESS_ADMIN"})}),(0,i.jsx)(n.td,{children:"1"}),(0,i.jsx)(n.td,{children:"Manage grants; edit/delete nodes & links"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ACCESS_EDITOR"})}),(0,i.jsx)(n.td,{children:"2"}),(0,i.jsx)(n.td,{children:"Edit node content & links; no grant management"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ACCESS_VIEWER"})}),(0,i.jsx)(n.td,{children:"3"}),(0,i.jsx)(n.td,{children:"Read-only"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"error-responses",children:"Error Responses"}),"\n",(0,i.jsxs)(n.p,{children:["All errors return JSON with a machine-readable ",(0,i.jsx)(n.code,{children:"error"})," code:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "error": "unauthorized",\n  "message": "Invalid or missing API token"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Common codes:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"HTTP"}),(0,i.jsx)(n.th,{children:"Error Code"}),(0,i.jsx)(n.th,{children:"Meaning"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"401"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"unauthorized"})}),(0,i.jsx)(n.td,{children:"Missing/invalid API token"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"403"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"forbidden"})}),(0,i.jsx)(n.td,{children:"Token valid but insufficient access level"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"409"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"version_conflict"})}),(0,i.jsxs)(n.td,{children:["Update attempted with stale ",(0,i.jsx)(n.code,{children:"Version"})," guard"]})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"rate-limits",children:"Rate Limits"}),"\n",(0,i.jsxs)(n.p,{children:["All API and WebSocket methods are rate limited.",(0,i.jsx)(n.br,{}),"\n","If a limit is exceeded, the server responds with HTTP 429 (REST) or emits a ",(0,i.jsx)(n.code,{children:"rate_limited"})," event (WebSocket)."]}),"\n",(0,i.jsx)(n.h3,{id:"global-defaults",children:"Global defaults"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Scope"}),(0,i.jsx)(n.th,{children:"Limit"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"REST (default)"}),(0,i.jsx)(n.td,{children:"200 requests / hour"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"WS connect (per IP)"}),(0,i.jsx)(n.td,{children:"10 connects / minute"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"notes",children:"Notes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Each method may define its own stricter limits (e.g. ",(0,i.jsx)(n.code,{children:"/login"}),", ",(0,i.jsx)(n.code,{children:"/graph"}),")."]}),"\n",(0,i.jsx)(n.li,{children:"Method-specific limits are documented on the corresponding method\u2019s page."}),"\n",(0,i.jsxs)(n.li,{children:["Rate limits are per ",(0,i.jsx)(n.strong,{children:"user"})," (for authenticated requests), except WS connect which is per ",(0,i.jsx)(n.strong,{children:"IP"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Exceeding the limit results in ",(0,i.jsx)(n.code,{children:"429 Too Many Requests"})," or a ",(0,i.jsx)(n.code,{children:"rate_limited"})," event."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"security-notes",children:"Security Notes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["API tokens are ",(0,i.jsx)(n.strong,{children:"long-lived"}),", so rotate regularly."]}),"\n",(0,i.jsx)(n.li,{children:"Never hardcode tokens in public repos or frontend code."}),"\n",(0,i.jsx)(n.li,{children:"Use HTTPS exclusively."}),"\n",(0,i.jsx)(n.li,{children:"Revoke tokens immediately if they are leaked."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"checklist-for-integrators",children:"Checklist for Integrators"}),"\n",(0,i.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Generate API token in Account Settings."]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Store it securely (e.g., secrets manager, env variable)."]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Use ",(0,i.jsx)(n.code,{children:"Authorization: Bearer <token>"})," in every REST call."]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Provide ",(0,i.jsx)(n.code,{children:"token"})," in WebSocket connections."]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Rotate/revoke tokens periodically."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>c});var t=s(6540);const i={},r=t.createContext(i);function l(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);